{% extends "pamphlet/base.html" %}
{%load bootstrap4 %}
{% load static %}

{% block content %}
    <script src="{% static 'js/handlebars-v4.7.7.js'%}"></script>
    <link rel="stylesheet" href="{% static 'css/status.css'%}"></script>

    <style>
        .status-box{
            border-width: 1px;
            border-color: lightgrey;
            border-style: none none solid none;
            background-color: white;
        }
        main{
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .status-container{
            width: 80%;
        }
    </style>
    <div>
        <h1>User: {{user_id}}</h1>
    </div>
    <div id="status-list-container" class="status-container container justify-content-center">
            
    </div>

    {% verbatim %}
    <script type="text/template" id="single-status-box">
        {{#each result}}

            <div class="row">
                    <div class="status-box col-9 col-sm-10 col-md-11">
                        <div class="row">
                                <div class=" container">
                                    <div class="row" >
                                        {{text_content}}
                                    </div>
                                </div>
                            
                        </div>
                        <div class="row">
                                <p class="date-info">{{creation_date}}</p>
                        </div>
                    </div>

            </div>
        {{/each}}
    </script>
{% endverbatim %}

{% include './handlebar_templates/single-status-box-template.html' %}

<script>
        $.ajax(
        {
            type:"GET",
            url:"/api/get-status/{{user_id}}",
            success:function(data){
                //console.log(data)
                display_serach_result(data)
                loadStatusAvatar($('#status-list-container'))

            },
            error:function(result){
                console.log(result.responseText)
            }

        }
    )
function display_serach_result(data){
    data_dict ={result:data}
    //console.log(data_dict)
    var tpl = $("#single-status-box-template").html()
    var template = Handlebars.compile(tpl)
    var html = template(data_dict)
    $("#status-list-container").html(html)
    //console.log(html)
}

</script>
{% endblock%}