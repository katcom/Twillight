{% extends "pamphlet/base.html" %}
{%load bootstrap4 %}
{% load static %}

{% block content %}
    <script src="{% static 'js/handlebars-v4.7.7.js'%}"></script>
    <link rel="stylesheet" href="{% static 'css/status.css'%}"></script>

    <style>

        main{
            display: flex;
            flex-direction: column;
            align-items: center;
        }

    </style>
    <div class="container" style="width: 100%;">
        <div  style="width: 100%;">
            <div style="display:flex; flex-direction:column;height: 600px;">
                <div style="height: 50%;background-image: url('{{user.avatar.avatar_image.url}}');background-color: white;">
    
                </div>
                <div style="background-color: white;height: 50%;  padding: 20px;">
                    <div style="display: flex; flex-direction: row; justify-content: end;">
                        <div style="justify-self: start;margin-right: auto;">
                            <img class="avatar-icon"alt=""  style="transform: scale(2.5) translateX(60%)" src="{{user.avatar.avatar_image.url}}">
                        </div>
                        <div style="align-self: flex-end;justify-self: end;">
                            <button class="rounded-pill btn btn-outline-success"> Edit Profile </button>
                        </div>
                    </div>
                    <div style="margin-top: 50px;margin-left: 30px;">
                        <div style="line-height: 1px;margin-bottom: 25px;">
                            <p>
                                <h2>{{user.face_pamphlet_account.user_custom_name}}</h2>
                            </p>
                            <p style="color:darkgray">
                                @{{user.username}}
                            </p>
                        </div>
                        <div>
                            Description
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="status-list-container" class="status-container container justify-content-center">
                
        </div>
    </div>
    

    {% verbatim %}
    <script type="text/template" id="single-status-box">
        {{#each result}}

            <div class="row">
                    <div class="status-box col-9 col-sm-10 col-md-11">
                        <div class="row">
                                <div class=" container">
                                    <div class="row" >
                                        {{text_content}}
                                    </div>
                                </div>
                            
                        </div>
                        <div class="row">
                                <p class="date-info">{{creation_date}}</p>
                        </div>
                    </div>

            </div>
        {{/each}}
    </script>
{% endverbatim %}

{% include './handlebar_templates/single-status-box-template.html' %}

<script>
        $.ajax(
        {
            type:"GET",
            url:"/api/get-status/{{user_id}}",
            success:function(data){
                //console.log(data)
                display_serach_result(data)
                loadStatusAvatar($('#status-list-container'))
                //setupLikeButtons()

            },
            error:function(result){
                console.log(result.responseText)
            }

        }
    )
function display_serach_result(data){
    data_dict ={result:data}
    //console.log(data_dict)
    var tpl = $("#single-status-box-template").html()
    var template = Handlebars.compile(tpl)
    var html = template(data_dict)
    $("#status-list-container").html(html)
    //console.log(html)
}

</script>
{% endblock%}